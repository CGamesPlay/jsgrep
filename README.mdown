# jsgrep: a syntactically-aware grep for JavaScript

Jsgrep is program that allows you to search for a particular JavaScript pattern,
using the abstract syntax tree (AST) of the program, which allows you to match
for particular identifiers, string constants, function calls, etc., without
having to be concerned with the whitespace of the original program.

## Examples

**Find all instances of a string constant**

    $ ./jsgrep "'image'" tests/*.js
    tests/jquery.js:            return elem.nodeName.toLowerCase() === "input" && "image" === elem.type;

Jsgrep parses the query as JavaScript and uses that to compare against the
target program, so the type of quote you search for does not matter.

**Find calls to window.setTimeout with a 0 timeout**

    $ jsgrep 'setTimeout(A, 0)' tests/*.js
    tests/jquery.js:        setTimeout( function() {
    tests/jquery.js:    setTimeout( clearFxNow, 0 );

Because jsgrep is using the abstract syntax tree, it can identify that the
particular call to `setTimeout` matches, even when it spans multiple lines
and contains an inline function.


**Find value defaulting**

    $ ./jsgrep "A = A || B;" tests/*.js
    tests/jquery.js:            args = args || [];
    tests/jquery.js:            type = type || "fx";
    tests/jquery.js:        type = type || "fx";
    tests/jquery.js:    results = results || [];
    tests/jquery.js:    context = context || document;
    tests/jquery.js:        result = result || 1;
    tests/jquery.js:    qualifier = qualifier || 0;
    tests/jquery.js:        context = context || document;
    tests/jquery.js:    dataType = dataType || options.dataTypes[ 0 ];

When the pattern references the same metavariable multiple times, jsgrep ensures
that the value of the metavariable is the same throughout the match.

## TODO

* Add support for ... to the parser
* Add support for { asdf: value } patterns

## Contributors

Jsgrep was written by Ryan Patterson at Facebook. Inspiration for this project
draws heavily from pfff, a source code analyzer written at Facebook.

* pfff - https://github.com/facebook/pfff
